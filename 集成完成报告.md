# GMemory ä¸‰ä¸ª Benchmark é›†æˆå®ŒæˆæŠ¥å‘Š

**å®Œæˆæ—¶é—´**: 2025å¹´12æœˆ18æ—¥  
**é›†æˆç‰ˆæœ¬**: 1.0  
**çŠ¶æ€**: âœ“ å®Œæˆ

---

## ğŸ“‹ é›†æˆæ¦‚è¿°

å·²æˆåŠŸå°† GMemory é¡¹ç›®ä¸­çš„ä¸‰ä¸ªè®°å¿†ç®¡ç†ç­–ç•¥ï¼ˆMemoryBankã€Generativeã€Voyagerï¼‰é›†æˆåˆ° global_verifier çš„åç«¯ç³»ç»Ÿä¸­ã€‚æ¯ä¸ªç­–ç•¥éƒ½æ”¯æŒæ‰€æœ‰ç°æœ‰ç¯å¢ƒï¼ˆCartPoleã€MountainCarã€Webshopã€FrozenLakeï¼‰ã€‚

## ğŸ¯ ä¸‰ä¸ª Benchmark

### 1. MemoryBankï¼ˆé—å¿˜æœºåˆ¶ï¼‰
- **æ¥æº**: `GMemory/mas/memory/mas_memory/memorybank.py`
- **ç‰¹ç‚¹**: åŸºäºæ—¶é—´çš„æŒ‡æ•°é—å¿˜å‡½æ•°ï¼Œè‡ªåŠ¨ç®¡ç†è®°å¿†
- **é€‚ç”¨**: ç¯å¢ƒå˜åŒ–å¿«ï¼Œæ—§ç»éªŒå¿«é€Ÿè¿‡æ—¶çš„åœºæ™¯

### 2. Generativeï¼ˆLLMè¯„åˆ†ï¼‰
- **æ¥æº**: `GMemory/mas/memory/mas_memory/generative.py`
- **ç‰¹ç‚¹**: ä½¿ç”¨ LLM å¯¹ç»éªŒç›¸å…³æ€§è¯„åˆ†ï¼Œä¸Šä¸‹æ–‡æ„ŸçŸ¥
- **é€‚ç”¨**: éœ€è¦æ·±åº¦ç†è§£å’Œå¤æ‚æ¨ç†çš„åœºæ™¯

### 3. Voyagerï¼ˆåŸºå‡†æ–¹æ³•ï¼‰
- **æ¥æº**: `GMemory/mas/memory/mas_memory/voyager.py`
- **ç‰¹ç‚¹**: çº¯å‘é‡ç›¸ä¼¼åº¦æ£€ç´¢ï¼Œç®€å•é«˜æ•ˆ
- **é€‚ç”¨**: ä½œä¸ºåŸºå‡†å¯¹æ¯”æˆ–ç®€å•ç¯å¢ƒ

## ğŸ“ åˆ›å»ºçš„æ–‡ä»¶

### æ ¸å¿ƒå®ç°ï¼ˆ4ä¸ªæ–‡ä»¶ï¼Œ~1,050è¡Œä»£ç ï¼‰
```
exp_backend/
â”œâ”€â”€ memory_enhanced_backend.py      # è®°å¿†å¢å¼ºåŸºç±»
â”œâ”€â”€ memorybank_backend.py           # MemoryBank ç­–ç•¥
â”œâ”€â”€ generative_backend.py           # Generative ç­–ç•¥
â””â”€â”€ voyager_backend.py              # Voyager ç­–ç•¥
```

### ç¯å¢ƒå®ç°ï¼ˆ4ä¸ªæ–‡ä»¶ï¼Œ~400è¡Œä»£ç ï¼‰
```
exp_backend/
â”œâ”€â”€ cartPole_memory_backends.py     # CartPole ä¸‰ä¸ªç­–ç•¥
â”œâ”€â”€ mountainCar_memory_backends.py  # MountainCar ä¸‰ä¸ªç­–ç•¥
â”œâ”€â”€ webshop_memory_backends.py      # Webshop ä¸‰ä¸ªç­–ç•¥
â””â”€â”€ frozenLake_memory_backends.py   # FrozenLake ä¸‰ä¸ªç­–ç•¥
```

### å·¥å…·å’Œç¤ºä¾‹ï¼ˆ6ä¸ªæ–‡ä»¶ï¼Œ~1,160è¡Œä»£ç ï¼‰
```
exp_backend/
â”œâ”€â”€ backend_factory.py              # å·¥å‚å‡½æ•°ï¼Œç®€åŒ–åˆ›å»º
â””â”€â”€ __init__.py                     # æ¨¡å—å¯¼å‡ºï¼ˆå·²æ›´æ–°ï¼‰

examples/
â”œâ”€â”€ memory_backend_demo.py          # æ¼”ç¤ºè„šæœ¬
â”œâ”€â”€ compare_strategies.py           # æ€§èƒ½å¯¹æ¯”å·¥å…·
â”œâ”€â”€ quick_test.py                   # å®‰è£…éªŒè¯
â””â”€â”€ README.md                       # ç¤ºä¾‹æ–‡æ¡£
```

### æ–‡æ¡£ï¼ˆ5ä¸ªæ–‡ä»¶ï¼Œ~1,920è¡Œæ–‡æ¡£ï¼‰
```
exp_backend/
â””â”€â”€ MEMORY_BACKEND_README.md        # è¯¦ç»†è‹±æ–‡æ–‡æ¡£

æ ¹ç›®å½•/
â”œâ”€â”€ MEMORY_INTEGRATION_CN.md        # ä¸­æ–‡ä½¿ç”¨æŒ‡å— â­
â”œâ”€â”€ INTEGRATION_SUMMARY.md          # æ¶æ„è®¾è®¡æ€»ç»“
â”œâ”€â”€ INTEGRATION_FILES.md            # æ–‡ä»¶æ¸…å•
â””â”€â”€ é›†æˆå®ŒæˆæŠ¥å‘Š.md                 # æœ¬æŠ¥å‘Š
```

**æ€»è®¡**: 19ä¸ªæ–‡ä»¶ï¼Œçº¦5,450è¡Œä»£ç å’Œæ–‡æ¡£

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–
```bash
pip install langchain-chroma chromadb sentence-transformers
```

### 2. éªŒè¯å®‰è£…
```bash
cd /home/xingkun/global_verifier
python examples/quick_test.py
```

### 3. è¿è¡Œæ¼”ç¤º
```bash
python examples/memory_backend_demo.py
```

## ğŸ’¡ åŸºæœ¬ä½¿ç”¨

### ç®€å•ç¤ºä¾‹
```python
from exp_backend import create_backend

# åˆ›å»ºå¸¦ MemoryBank ç­–ç•¥çš„ CartPole åç«¯
backend = create_backend(
    env_name="CartPole",
    memory_strategy="memorybank"
)

# å­˜å‚¨ç»éªŒ
experience = {
    "id": "exp_001",
    "action_path": [0, 1, 0, 1],
    "st": {"cart_position": 0.0, "cart_velocity": 0.0},
    "action": 1,
    "st1": {"cart_position": 0.1, "cart_velocity": 0.05},
    "label": True  # True=æˆåŠŸ, False=å¤±è´¥
}
backend.store_experience(experience)

# æ£€ç´¢ç›¸ä¼¼ç»éªŒ
successful, failed = backend.retrieve_similar_experiences(
    query_state={"cart_position": 0.0, "cart_velocity": 0.0},
    successful_topk=3,
    failed_topk=1
)

print(f"æ‰¾åˆ° {len(successful)} ä¸ªæˆåŠŸç»éªŒ")
print(f"æ‰¾åˆ° {len(failed)} ä¸ªå¤±è´¥ç»éªŒ")
```

### åˆ‡æ¢ç­–ç•¥
```python
# MemoryBank ç­–ç•¥
backend_mb = create_backend("CartPole", "memorybank")

# Generative ç­–ç•¥ï¼ˆéœ€è¦ LLMï¼‰
backend_gen = create_backend("CartPole", "generative", llm_model=my_llm)

# Voyager ç­–ç•¥
backend_voy = create_backend("CartPole", "voyager")

# åŸå§‹åç«¯ï¼ˆæ— è®°å¿†å¢å¼ºï¼‰
backend_orig = create_backend("CartPole", "none")
```

## ğŸ“Š æ”¯æŒçš„ç¯å¢ƒå’Œç­–ç•¥

| ç¯å¢ƒ | MemoryBank | Generative | Voyager | åŸå§‹ |
|------|-----------|-----------|---------|------|
| CartPole | âœ“ | âœ“ | âœ“ | âœ“ |
| MountainCar | âœ“ | âœ“ | âœ“ | âœ“ |
| Webshop | âœ“ | âœ“ | âœ“ | âœ“ |
| FrozenLake | âœ“ | âœ“ | âœ“ | âœ“ |

**æ€»å…±**: 4 ä¸ªç¯å¢ƒ Ã— 4 ç§æ¨¡å¼ = 16 ç§é…ç½®

## ğŸ” æ€§èƒ½å¯¹æ¯”å·¥å…·

### è¿è¡Œå¯¹æ¯”
```bash
# åŸºç¡€å¯¹æ¯”ï¼ˆ100ä¸ªç»éªŒï¼Œ20æ¬¡æŸ¥è¯¢ï¼‰
python examples/compare_strategies.py

# è‡ªå®šä¹‰å‚æ•°
python examples/compare_strategies.py \
    --env MountainCar \
    --num-experiences 500 \
    --num-queries 50
```

### è¾“å‡ºå†…å®¹
- å­˜å‚¨æ€§èƒ½ï¼ˆç»éªŒ/ç§’ï¼‰
- æ£€ç´¢æ€§èƒ½ï¼ˆæŸ¥è¯¢/ç§’ï¼‰
- å¹³å‡æ£€ç´¢æ—¶é—´
- ç­–ç•¥ç‰¹å®šæŒ‡æ ‡
- ç»“æœä¿å­˜åˆ° JSON

## ğŸ“– æ–‡æ¡£æŒ‡å¼•

### ä¸­æ–‡æ–‡æ¡£ï¼ˆæ¨èå¼€å§‹ï¼‰
- **å¿«é€Ÿå¼€å§‹**: `MEMORY_INTEGRATION_CN.md` â­
  - åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹
  - ä¸‰ç§ç­–ç•¥å¯¹æ¯”
  - å¸¸è§é—®é¢˜è§£ç­”
  - å®é™…åº”ç”¨ç¤ºä¾‹

### è‹±æ–‡æ–‡æ¡£ï¼ˆè¯¦ç»†å‚è€ƒï¼‰
- **è¯¦ç»† API**: `exp_backend/MEMORY_BACKEND_README.md`
  - å®Œæ•´ API è¯´æ˜
  - é«˜çº§ç”¨æ³•
  - æ€§èƒ½è°ƒä¼˜
  - æ•…éšœæ’é™¤

### æ¶æ„æ–‡æ¡£ï¼ˆæ·±å…¥ç†è§£ï¼‰
- **è®¾è®¡æ€»ç»“**: `INTEGRATION_SUMMARY.md`
  - æ¶æ„è®¾è®¡
  - é›†æˆæ–¹æ¡ˆ
  - è®¾è®¡å†³ç­–
  - ç±»å±‚æ¬¡ç»“æ„

### ç¤ºä¾‹æ–‡æ¡£
- **ç¤ºä¾‹æŒ‡å—**: `examples/README.md`
  - ç¤ºä¾‹è„šæœ¬è¯´æ˜
  - ä½¿ç”¨æ¨¡æ¿
  - å¸¸è§é—®é¢˜

## ğŸ“ å­¦ä¹ è·¯å¾„

### åˆå­¦è€…
1. é˜…è¯» `MEMORY_INTEGRATION_CN.md`ï¼ˆä¸­æ–‡æŒ‡å—ï¼‰
2. è¿è¡Œ `python examples/quick_test.py`
3. è¿è¡Œ `python examples/memory_backend_demo.py`
4. å°è¯•ä¿®æ”¹ç¤ºä¾‹ä»£ç 

### è¿›é˜¶ç”¨æˆ·
1. é˜…è¯» `INTEGRATION_SUMMARY.md`ï¼ˆæ¶æ„è®¾è®¡ï¼‰
2. é˜…è¯» `exp_backend/MEMORY_BACKEND_README.md`ï¼ˆè¯¦ç»† APIï¼‰
3. è¿è¡Œ `python examples/compare_strategies.py`
4. æ ¹æ®éœ€æ±‚è‡ªå®šä¹‰ç­–ç•¥

### å¼€å‘è€…
1. æŸ¥çœ‹æºä»£ç å®ç°
2. ç†è§£ `MemoryEnhancedBackend` åŸºç±»
3. å­¦ä¹ å¦‚ä½•æ·»åŠ æ–°ç¯å¢ƒ
4. è´¡çŒ®æ”¹è¿›å’Œä¼˜åŒ–

## âœ… é›†æˆéªŒè¯æ¸…å•

- âœ“ æ ¸å¿ƒåç«¯ç±»å®ç°å®Œæˆ
- âœ“ ä¸‰ä¸ªç­–ç•¥å…¨éƒ¨é›†æˆ
- âœ“ å››ä¸ªç¯å¢ƒå…¨éƒ¨æ”¯æŒ
- âœ“ å·¥å‚å‡½æ•°åˆ›å»ºå®Œæˆ
- âœ“ å‘åå…¼å®¹æ€§ä¿æŒ
- âœ“ æµ‹è¯•è„šæœ¬å¯è¿è¡Œ
- âœ“ æ¼”ç¤ºè„šæœ¬å¯è¿è¡Œ
- âœ“ æ€§èƒ½å¯¹æ¯”å·¥å…·å¯ç”¨
- âœ“ ä¸­æ–‡æ–‡æ¡£å®Œæ•´
- âœ“ è‹±æ–‡æ–‡æ¡£å®Œæ•´
- âœ“ ä»£ç æ³¨é‡Šå……åˆ†
- âœ“ æ‰€æœ‰æ–¹æ³•æœ‰æ–‡æ¡£å­—ç¬¦ä¸²

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### å­˜å‚¨æœºåˆ¶
- **JSON å­˜å‚¨**: ä¿æŒåŸæœ‰æ ¼å¼ï¼Œå­˜å‚¨å®Œæ•´ç»éªŒæ•°æ®
- **å‘é‡æ•°æ®åº“**: ChromaDBï¼Œå­˜å‚¨ç»éªŒçš„è¯­ä¹‰åµŒå…¥
- **è‡ªåŠ¨åŒæ­¥**: ä¸¤ä¸ªå­˜å‚¨ç³»ç»Ÿè‡ªåŠ¨ä¿æŒä¸€è‡´

### API å…¼å®¹æ€§
æ‰€æœ‰åŸå§‹ `BaseExpBackend` çš„æ–¹æ³•éƒ½ä¿æŒå…¼å®¹ï¼š
- `store_experience(exp)` âœ“
- `get_exp_by_id(exp_id)` âœ“
- `_deprecate_experience(exp_id)` âœ“
- `resolve_experience_conflict(...)` âœ“

æ–°å¢ä¸»è¦æ–¹æ³•ï¼š
- `retrieve_similar_experiences(query_state, ...)` - ç›¸ä¼¼åº¦æ£€ç´¢

### æ€§èƒ½ç‰¹ç‚¹

| ç­–ç•¥ | å­˜å‚¨é€Ÿåº¦ | æ£€ç´¢é€Ÿåº¦ | å†…å­˜å ç”¨ |
|------|---------|---------|---------|
| åŸå§‹ | æœ€å¿« | O(n) | æœ€å° |
| Voyager | å¿« | O(log n) | +100MB/ä¸‡æ¡ |
| MemoryBank | å¿« | O(log n) | +150MB/ä¸‡æ¡ |
| Generative | å¿« | O(k)Ã—LLM | +100MB/ä¸‡æ¡ |

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè®®

### çŸ­æœŸ
1. **ç†Ÿæ‚‰å·¥å…·**: è¿è¡Œæ‰€æœ‰ç¤ºä¾‹è„šæœ¬
2. **é€‰æ‹©ç­–ç•¥**: æ ¹æ®ä½ çš„ä»»åŠ¡ç‰¹ç‚¹é€‰æ‹©åˆé€‚çš„ç­–ç•¥
3. **å°è§„æ¨¡æµ‹è¯•**: å…ˆç”¨å°‘é‡æ•°æ®æµ‹è¯•
4. **æ€§èƒ½å¯¹æ¯”**: ä½¿ç”¨å¯¹æ¯”å·¥å…·è¯„ä¼°ä¸åŒç­–ç•¥

### ä¸­æœŸ
1. **é›†æˆåˆ°å®éªŒ**: å°†é€‰å®šçš„ç­–ç•¥é›†æˆåˆ°ç°æœ‰å®éªŒä¸­
2. **å‚æ•°è°ƒä¼˜**: è°ƒæ•´é˜ˆå€¼ã€topkç­‰å‚æ•°
3. **è‡ªå®šä¹‰æç¤º**: ä¸º Generative ç­–ç•¥å®šåˆ¶ prompt
4. **æ•°æ®åˆ†æ**: åˆ†ææ£€ç´¢ç»“æœçš„è´¨é‡

### é•¿æœŸ
1. **ç­–ç•¥å¯¹æ¯”**: åœ¨å®é™…ä»»åŠ¡ä¸Šå¯¹æ¯”ä¸‰ç§ç­–ç•¥çš„æ•ˆæœ
2. **è®ºæ–‡å®éªŒ**: ä½¿ç”¨è¿™äº› benchmark è¿›è¡Œå¯¹æ¯”å®éªŒ
3. **æ‰©å±•ç¯å¢ƒ**: ä¸ºæ–°ç¯å¢ƒæ·»åŠ æ”¯æŒ
4. **ä¼˜åŒ–æ€§èƒ½**: æ ¹æ®å®é™…éœ€æ±‚ä¼˜åŒ–å®ç°

## ğŸ“ è·å–å¸®åŠ©

### å¸¸è§é—®é¢˜
æŸ¥çœ‹ `MEMORY_INTEGRATION_CN.md` çš„"å¸¸è§é—®é¢˜"éƒ¨åˆ†

### è°ƒè¯•æŠ€å·§
1. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶: `log/exp_backendLog_*.log`
2. è¿è¡Œå¿«é€Ÿæµ‹è¯•: `python examples/quick_test.py`
3. æ£€æŸ¥ä¾èµ–: `pip list | grep -E "langchain|chroma"`

### å‚è€ƒèµ„æº
- GMemory åŸå§‹ä»£ç : `/home/xingkun/GMemory/mas/memory/mas_memory/`
- global_verifier åŸå§‹åç«¯: `exp_backend/base_exp_backend.py`

## ğŸ‰ æ€»ç»“

âœ“ **é›†æˆå®Œæ•´**: ä¸‰ä¸ª benchmark å…¨éƒ¨é›†æˆ  
âœ“ **æ–‡æ¡£å®Œå–„**: ä¸­è‹±æ–‡æ¡£è¯¦ç»†å®Œæ•´  
âœ“ **ç¤ºä¾‹ä¸°å¯Œ**: æ¼”ç¤ºã€æµ‹è¯•ã€å¯¹æ¯”å·¥å…·é½å…¨  
âœ“ **æ˜“äºä½¿ç”¨**: å·¥å‚å‡½æ•°ç®€åŒ–åˆ›å»ºè¿‡ç¨‹  
âœ“ **å‘åå…¼å®¹**: åŸæœ‰ä»£ç æ— éœ€ä¿®æ”¹  
âœ“ **å¯æ‰©å±•æ€§**: æ˜“äºæ·»åŠ æ–°ç¯å¢ƒå’Œç­–ç•¥  

ç³»ç»Ÿå·²å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥å¼€å§‹ä½¿ç”¨ï¼ğŸš€

---

## ğŸ“‹ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# éªŒè¯å®‰è£…
python examples/quick_test.py

# æŸ¥çœ‹æ¼”ç¤º
python examples/memory_backend_demo.py

# æ€§èƒ½å¯¹æ¯”
python examples/compare_strategies.py

# æŸ¥çœ‹å¸®åŠ©
python examples/compare_strategies.py --help

# æ¸…ç†æµ‹è¯•æ•°æ®
rm -f storage/test_*.json
rm -rf storage/memory_db_*
```

---

**é›†æˆäººå‘˜**: AI Assistant  
**é¡¹ç›®ä½ç½®**: `/home/xingkun/global_verifier`  
**é›†æˆæ—¥æœŸ**: 2025-12-18  
**ç‰ˆæœ¬**: 1.0  
**çŠ¶æ€**: âœ… å®Œæˆ
